[
  {
    "id": "1926984267e0fec1",
    "type": "tab",
    "label": "Back door",
    "disabled": false,
    "info": ""
  },
  {
    "id": "e9f6f4497b61dc69",
    "type": "server-state-changed",
    "z": "1926984267e0fec1",
    "name": "BAck Door",
    "server": "7ab5c227.a3ce8c",
    "version": 4,
    "exposeToHomeAssistant": false,
    "haConfig": [
      {
        "property": "name",
        "value": ""
      },
      {
        "property": "icon",
        "value": ""
      }
    ],
    "entityidfilter": "lock.back_door",
    "entityidfiltertype": "exact",
    "outputinitially": false,
    "state_type": "str",
    "haltifstate": "(unlocked|locked)",
    "halt_if_type": "re",
    "halt_if_compare": "is",
    "outputs": 2,
    "output_only_on_state_change": true,
    "for": "0",
    "forType": "num",
    "forUnits": "minutes",
    "ignorePrevStateNull": false,
    "ignorePrevStateUnknown": false,
    "ignorePrevStateUnavailable": false,
    "ignoreCurrentStateUnknown": false,
    "ignoreCurrentStateUnavailable": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "eventData"
      },
      {
        "property": "topic",
        "propertyType": "msg",
        "value": "",
        "valueType": "triggerId"
      }
    ],
    "x": 460,
    "y": 420,
    "wires": [
      [
        "8d1093308d6433e7"
      ],
      [
        "8d1093308d6433e7"
      ]
    ]
  },
  {
    "id": "cad0065abe810e75",
    "type": "api-call-service",
    "z": "1926984267e0fec1",
    "name": "",
    "server": "7ab5c227.a3ce8c",
    "version": 5,
    "debugenabled": false,
    "domain": "lock",
    "service": "lock",
    "areaId": [],
    "deviceId": [],
    "entityId": [
      "lock.back_door"
    ],
    "data": "",
    "dataType": "json",
    "mergeContext": "",
    "mustacheAltTags": false,
    "outputProperties": [],
    "queue": "none",
    "x": 1180,
    "y": 420,
    "wires": [
      []
    ]
  },
  {
    "id": "5e653191a5bf60b4",
    "type": "change",
    "z": "1926984267e0fec1",
    "name": "Set Data for mass alert",
    "rules": [
      {
        "t": "set",
        "p": "color_value",
        "pt": "msg",
        "to": "[0,255,0]",
        "tot": "json"
      },
      {
        "t": "set",
        "p": "dbrigthness",
        "pt": "msg",
        "to": "100",
        "tot": "num"
      },
      {
        "t": "set",
        "p": "message",
        "pt": "msg",
        "to": "Someone Has Entered",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1380,
    "y": 540,
    "wires": [
      [
        "211db03c05f264bb"
      ]
    ]
  },
  {
    "id": "3c74b545f5aa3550",
    "type": "link out",
    "z": "1926984267e0fec1",
    "name": "Light and Speakers",
    "mode": "link",
    "links": [
      "45904ca6429d867d"
    ],
    "x": 1715,
    "y": 560,
    "wires": []
  },
  {
    "id": "eaf32a902c4971a3",
    "type": "switch",
    "z": "1926984267e0fec1",
    "name": "",
    "property": "payload",
    "propertyType": "msg",
    "rules": [
      {
        "t": "cont",
        "v": "unlocked",
        "vt": "str"
      }
    ],
    "checkall": "true",
    "repair": false,
    "outputs": 1,
    "x": 620,
    "y": 560,
    "wires": [
      [
        "2990b9e9192f7a80"
      ]
    ]
  },
  {
    "id": "2990b9e9192f7a80",
    "type": "api-current-state",
    "z": "1926984267e0fec1",
    "name": "",
    "server": "7ab5c227.a3ce8c",
    "version": 3,
    "outputs": 2,
    "halt_if": "off",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "binary_sensor.sensor_kitchen_motion_occupancy",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "for": 0,
    "forType": "num",
    "forUnits": "minutes",
    "x": 980,
    "y": 560,
    "wires": [
      [
        "5e653191a5bf60b4"
      ],
      [
        "b85861972ad4be99"
      ]
    ]
  },
  {
    "id": "b85861972ad4be99",
    "type": "change",
    "z": "1926984267e0fec1",
    "name": "Set Data for mass alert",
    "rules": [
      {
        "t": "set",
        "p": "color_value",
        "pt": "msg",
        "to": "[0,255,255]",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "dbrigthness",
        "pt": "msg",
        "to": "100",
        "tot": "num"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1380,
    "y": 580,
    "wires": [
      [
        "211db03c05f264bb"
      ]
    ]
  },
  {
    "id": "8d1093308d6433e7",
    "type": "trigger",
    "z": "1926984267e0fec1",
    "name": "",
    "op1": "",
    "op2": "1",
    "op1type": "nul",
    "op2type": "num",
    "duration": "2",
    "extend": false,
    "overrideDelay": false,
    "units": "min",
    "reset": "locked",
    "bytopic": "all",
    "topic": "topic",
    "outputs": 1,
    "x": 630,
    "y": 420,
    "wires": [
      [
        "4804d93f7030bac3"
      ]
    ]
  },
  {
    "id": "211db03c05f264bb",
    "type": "subflow:233ac7dcd801a802",
    "z": "1926984267e0fec1",
    "name": "",
    "x": 1650,
    "y": 560,
    "wires": []
  },
  {
    "id": "1d3476464ff3d90d",
    "type": "comment",
    "z": "1926984267e0fec1",
    "name": "Auto Locks the door",
    "info": "",
    "x": 490,
    "y": 380,
    "wires": []
  },
  {
    "id": "4804d93f7030bac3",
    "type": "ha-wait-until",
    "z": "1926984267e0fec1",
    "name": "",
    "server": "7ab5c227.a3ce8c",
    "version": 2,
    "outputs": 2,
    "entityId": "binary_sensor.sensor_back_outside_door_contact",
    "entityIdFilterType": "exact",
    "property": "state",
    "comparator": "is",
    "value": "off",
    "valueType": "str",
    "timeout": "2",
    "timeoutType": "num",
    "timeoutUnits": "minutes",
    "checkCurrentState": true,
    "blockInputOverrides": true,
    "outputProperties": [],
    "entityLocation": "data",
    "entityLocationType": "none",
    "x": 840,
    "y": 420,
    "wires": [
      [
        "cad0065abe810e75"
      ],
      [
        "cad0065abe810e75"
      ]
    ]
  },
  {
    "id": "608a474d04e5cc72",
    "type": "comment",
    "z": "1926984267e0fec1",
    "name": "Detect when back door gets closed",
    "info": "",
    "x": 840,
    "y": 460,
    "wires": []
  },
  {
    "id": "ef89c80a28516d21",
    "type": "comment",
    "z": "1926984267e0fec1",
    "name": "Lock the door",
    "info": "",
    "x": 1210,
    "y": 460,
    "wires": []
  },
  {
    "id": "1eec638a7d8af565",
    "type": "server-state-changed",
    "z": "1926984267e0fec1",
    "name": "BAck Door",
    "server": "7ab5c227.a3ce8c",
    "version": 4,
    "exposeToHomeAssistant": false,
    "haConfig": [
      {
        "property": "name",
        "value": ""
      },
      {
        "property": "icon",
        "value": ""
      }
    ],
    "entityidfilter": "lock.back_door",
    "entityidfiltertype": "exact",
    "outputinitially": false,
    "state_type": "str",
    "haltifstate": "(unlocked|locked)",
    "halt_if_type": "re",
    "halt_if_compare": "is",
    "outputs": 2,
    "output_only_on_state_change": true,
    "for": "0",
    "forType": "num",
    "forUnits": "minutes",
    "ignorePrevStateNull": false,
    "ignorePrevStateUnknown": false,
    "ignorePrevStateUnavailable": false,
    "ignoreCurrentStateUnknown": false,
    "ignoreCurrentStateUnavailable": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "eventData"
      },
      {
        "property": "topic",
        "propertyType": "msg",
        "value": "",
        "valueType": "triggerId"
      }
    ],
    "x": 440,
    "y": 560,
    "wires": [
      [
        "eaf32a902c4971a3"
      ],
      []
    ]
  }
]