[
  {
    "id": "8ab98f5aa8b2c325",
    "type": "tab",
    "label": "tests",
    "disabled": false,
    "info": ""
  },
  {
    "id": "2c8492c9e2889acd",
    "type": "http request",
    "z": "8ab98f5aa8b2c325",
    "name": "POST request",
    "method": "PUT",
    "ret": "txt",
    "paytoqs": "ignore",
    "url": "http://192.168.0.15:6100/v1/lifx/command",
    "tls": "",
    "persist": false,
    "proxy": "",
    "authType": "",
    "senderr": false,
    "headers": [],
    "x": 1200,
    "y": 1080,
    "wires": [
      [
        "a907fb5a44b8cc10"
      ]
    ]
  },
  {
    "id": "485c9e7a7b788b50",
    "type": "function",
    "z": "8ab98f5aa8b2c325",
    "name": "Help",
    "func": "var newMsg = {\n    \"payload\":        {\"command\": \"help\", \"args\": {\"command\": \"animation\"}}\n};\nreturn newMsg;\n",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 930,
    "y": 1120,
    "wires": [
      [
        "2c8492c9e2889acd"
      ]
    ]
  },
  {
    "id": "1cbdc0925815f62b",
    "type": "inject",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 700,
    "y": 1160,
    "wires": [
      [
        "26cbaebe28fd5cab"
      ]
    ]
  },
  {
    "id": "a907fb5a44b8cc10",
    "type": "debug",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "true",
    "targetType": "full",
    "x": 1370,
    "y": 1120,
    "wires": []
  },
  {
    "id": "91e2c7797d282c73",
    "type": "function",
    "z": "8ab98f5aa8b2c325",
    "name": "stopping effect",
    "func": "var newMsg = {\n    \"payload\":         {\n        \"command\": \"effects/stop\"\n        }\n};\nreturn newMsg;\n",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 940,
    "y": 1080,
    "wires": [
      [
        "2c8492c9e2889acd"
      ]
    ]
  },
  {
    "id": "475b3eddd6ecef1f",
    "type": "function",
    "z": "8ab98f5aa8b2c325",
    "name": "Discover",
    "func": "var newMsg = {\n    \"payload\":         {\n        \"command\": \"discover\"\n        }\n};\nreturn newMsg;\n",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 940,
    "y": 1040,
    "wires": [
      [
        "2c8492c9e2889acd"
      ]
    ]
  },
  {
    "id": "f56aad64d35e1b79",
    "type": "function",
    "z": "8ab98f5aa8b2c325",
    "name": "red",
    "func": "var newMsg = {\n    \"payload\":               {\n        \"command\": \"transform\",\n        \"args\": {\n          \"transform\": {\n            \"color\": \"red saturation:1.0 brightness:0.5\"\n          }\n        }\n      }\n};\nreturn newMsg;\n",
    "outputs": 1,
    "noerr": 0,
    "x": 950,
    "y": 1000,
    "wires": [
      [
        "2c8492c9e2889acd"
      ]
    ]
  },
  {
    "id": "26cbaebe28fd5cab",
    "type": "function",
    "z": "8ab98f5aa8b2c325",
    "name": "start animation on bedroom",
    "func": "var newMsg = {\n    \"payload\":         {\n      \"command\": \"animation/start\",\n      \"args\": {\n        \"matcher\": {\"serial\": \"d073d53df5e6\"},\n        \"animations\": [\"asd\"],\n        \"run_options\": {\"reinstate_on_end\": true, \"animation_limit\": 3}\n      }\n    }\n};\nreturn newMsg;\n",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 1000,
    "y": 1160,
    "wires": [
      [
        "2c8492c9e2889acd"
      ]
    ]
  },
  {
    "id": "273d7c2a22c6abee",
    "type": "inject",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "1",
    "payloadType": "str",
    "x": 330,
    "y": 220,
    "wires": [
      [
        "52d6ae1fc56701c4"
      ]
    ]
  },
  {
    "id": "4207b7e1aa329ee1",
    "type": "http request",
    "z": "8ab98f5aa8b2c325",
    "name": "POST request",
    "method": "POST",
    "ret": "txt",
    "paytoqs": "ignore",
    "url": "http://192.168.0.14:5050/v1/vision/face/register",
    "tls": "",
    "persist": false,
    "proxy": "",
    "authType": "",
    "senderr": false,
    "headers": [],
    "x": 760,
    "y": 220,
    "wires": [
      [
        "78c0882e7a439cbe"
      ]
    ]
  },
  {
    "id": "78c0882e7a439cbe",
    "type": "debug",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "true",
    "targetType": "full",
    "x": 910,
    "y": 120,
    "wires": []
  },
  {
    "id": "52d6ae1fc56701c4",
    "type": "function",
    "z": "8ab98f5aa8b2c325",
    "name": "Set image",
    "func": "var newMsg = {\n    \"payload\":{\n        \"files\":{ \"file_path\": \"http://192.168.0.15:8123/local/maxi.jpg\"},\n        \"data\":{\"userid\":\"Maxi\"}\n        \n    }\n};\nreturn newMsg;\n",
    "outputs": 1,
    "noerr": 0,
    "x": 480,
    "y": 220,
    "wires": [
      [
        "4207b7e1aa329ee1"
      ]
    ]
  },
  {
    "id": "c1b1b39ee9e7b715",
    "type": "inject",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "1",
    "payloadType": "str",
    "x": 330,
    "y": 320,
    "wires": [
      [
        "37d924dd8bff3492"
      ]
    ]
  },
  {
    "id": "9e2adc0d8aeca04d",
    "type": "http request",
    "z": "8ab98f5aa8b2c325",
    "name": "POST request",
    "method": "POST",
    "ret": "txt",
    "paytoqs": "ignore",
    "url": "http://192.168.0.14:5050/v1/vision/face/recognize",
    "tls": "",
    "persist": true,
    "proxy": "",
    "authType": "",
    "senderr": false,
    "headers": [],
    "x": 760,
    "y": 320,
    "wires": [
      [
        "3470211e811be856"
      ]
    ]
  },
  {
    "id": "3470211e811be856",
    "type": "debug",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "true",
    "targetType": "full",
    "x": 950,
    "y": 320,
    "wires": []
  },
  {
    "id": "37d924dd8bff3492",
    "type": "function",
    "z": "8ab98f5aa8b2c325",
    "name": "Set image",
    "func": "var newMsg = {\n    \"payload\":{\n  \"name\": \"Maxi\",\n  \"file_path\": \"http://192.168.0.15:8123/local/maxi.jpg\"\n}\n};\nreturn newMsg;\n",
    "outputs": 1,
    "noerr": 0,
    "x": 480,
    "y": 320,
    "wires": [
      [
        "9e2adc0d8aeca04d"
      ]
    ]
  },
  {
    "id": "9763d29c9106db72",
    "type": "inject",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 700,
    "y": 1120,
    "wires": [
      [
        "485c9e7a7b788b50"
      ]
    ]
  },
  {
    "id": "5af4ba4d4a8483a9",
    "type": "inject",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 700,
    "y": 1080,
    "wires": [
      [
        "91e2c7797d282c73"
      ]
    ]
  },
  {
    "id": "cd31cc528ac759d2",
    "type": "inject",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 700,
    "y": 1040,
    "wires": [
      [
        "475b3eddd6ecef1f"
      ]
    ]
  },
  {
    "id": "8e379bab15c24f29",
    "type": "inject",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 700,
    "y": 1000,
    "wires": [
      [
        "f56aad64d35e1b79"
      ]
    ]
  },
  {
    "id": "564c40d106ea5c6e",
    "type": "function",
    "z": "8ab98f5aa8b2c325",
    "name": "stop animation on bedroom",
    "func": "var newMsg = {\n    \"payload\":         {\n      \"command\": \"animation/stop\",\n      \"args\": {\n        \"matcher\": {\"serial\": \"d073d53df5e6\"},\n        \"animations\": [\"nan\"],\n        \"run_options\": {\"reinstate_on_end\": true, \"animation_limit\": 3}\n      }\n    }\n};\nreturn newMsg;\n",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 980,
    "y": 1200,
    "wires": [
      [
        "2c8492c9e2889acd"
      ]
    ]
  },
  {
    "id": "14662096d24bcd39",
    "type": "inject",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 720,
    "y": 1220,
    "wires": [
      [
        "564c40d106ea5c6e"
      ]
    ]
  },
  {
    "id": "b919acc13c6761d4",
    "type": "function",
    "z": "8ab98f5aa8b2c325",
    "name": "Help animate",
    "func": "var newMsg = {\n    \"payload\":        {\"command\": \"animation/info\", \"args\": {\"command\": \"animation/list\"}}\n};\nreturn newMsg;\n",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 970,
    "y": 940,
    "wires": [
      [
        "2c8492c9e2889acd"
      ]
    ]
  },
  {
    "id": "b47aedbb9254e7e4",
    "type": "inject",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 720,
    "y": 940,
    "wires": [
      [
        "b919acc13c6761d4"
      ]
    ]
  },
  {
    "id": "ec5ee7adb195d6a1",
    "type": "function",
    "z": "8ab98f5aa8b2c325",
    "name": "Help other",
    "func": "var newMsg = {\n    \"payload\":        {\"command\": \"help\", \"args\": {\"command\": \"transform\"}}\n};\nreturn newMsg;\n",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 990,
    "y": 880,
    "wires": [
      [
        "2c8492c9e2889acd"
      ]
    ]
  },
  {
    "id": "82f38dbdc47c28ad",
    "type": "inject",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 740,
    "y": 880,
    "wires": [
      [
        "ec5ee7adb195d6a1"
      ]
    ]
  },
  {
    "id": "af63b1c9e776cfa6",
    "type": "function",
    "z": "8ab98f5aa8b2c325",
    "name": "start transform on bedroom",
    "func": "var newMsg = {\n    \"payload\":               {\n        \"command\": \"transform\",\n        \"args\": {\n          \"transform\": {\n            \"color\": \"red saturation:1.0 brightness:0.5\",\n            \"effect\": \"breathe\", \n            \"cycles\": 50\n          }\n        }\n      }\n};\nreturn newMsg;\n",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 980,
    "y": 1280,
    "wires": [
      [
        "2c8492c9e2889acd"
      ]
    ]
  },
  {
    "id": "148b94c687d18162",
    "type": "inject",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 740,
    "y": 1300,
    "wires": [
      [
        "af63b1c9e776cfa6"
      ]
    ]
  },
  {
    "id": "7c9a8b6e062c05a6",
    "type": "function",
    "z": "8ab98f5aa8b2c325",
    "name": "start transform on bedroom",
    "func": "var newMsg = {\n    \"payload\":               {\n        \"command\": \"transform\",\n        \"args\": {\n          \"transform\": {\n            \"color\": \"red saturation:1.0 brightness:0.5\",\n            \"effect\": \"triangle\", \n            \"cycles\": 50\n          }\n        }\n      }\n};\nreturn newMsg;\n",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 960,
    "y": 1340,
    "wires": [
      [
        "2c8492c9e2889acd"
      ]
    ]
  },
  {
    "id": "b88929809f6eeea4",
    "type": "inject",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 720,
    "y": 1360,
    "wires": [
      [
        "7c9a8b6e062c05a6"
      ]
    ]
  },
  {
    "id": "c6a30bac55fafa49",
    "type": "http request",
    "z": "8ab98f5aa8b2c325",
    "name": "POST request",
    "method": "POST",
    "ret": "txt",
    "paytoqs": "ignore",
    "url": "http://192.168.0.15:6100/v1/lights/all/effects/morph",
    "tls": "",
    "persist": false,
    "proxy": "",
    "authType": "",
    "x": 1000,
    "y": 1460,
    "wires": [
      [
        "cc7107656c191004"
      ]
    ]
  },
  {
    "id": "7cfb7c5074dd3392",
    "type": "function",
    "z": "8ab98f5aa8b2c325",
    "name": "start transform on bedroom",
    "func": "var newMsg = {\n    \"payload\":               {\n        \"command\": \"transform\",\n        \"args\": {\n          \"transform\": {\n            \"color\": \"red saturation:1.0 brightness:0.5\",\n            \"effect\": \"triangle\", \n            \"cycles\": 50\n          }\n        }\n      }\n};\nreturn newMsg;\n",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 760,
    "y": 1500,
    "wires": [
      [
        "c6a30bac55fafa49"
      ]
    ]
  },
  {
    "id": "42290e9141851995",
    "type": "inject",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 660,
    "y": 1420,
    "wires": [
      [
        "7cfb7c5074dd3392"
      ]
    ]
  },
  {
    "id": "cc7107656c191004",
    "type": "debug",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "true",
    "targetType": "full",
    "x": 1190,
    "y": 1460,
    "wires": []
  },
  {
    "id": "8ec61da1e806f88a",
    "type": "function",
    "z": "8ab98f5aa8b2c325",
    "name": " Set payload for play media ",
    "func": "var msg = {\n    \"payload\": {\n      \"message\": \"hoy\"\n}\n\n}\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 880,
    "y": 2040,
    "wires": [
      [
        "89cd2bba1ebcdc1e"
      ]
    ]
  },
  {
    "id": "89cd2bba1ebcdc1e",
    "type": "http request",
    "z": "8ab98f5aa8b2c325",
    "name": "POST request",
    "method": "POST",
    "ret": "obj",
    "paytoqs": "ignore",
    "url": "http://192.168.0.14:8085/broadcast",
    "tls": "",
    "persist": false,
    "proxy": "",
    "authType": "",
    "senderr": false,
    "headers": [],
    "x": 1200,
    "y": 2040,
    "wires": [
      [
        "d2a3ea3f9ca95bc2"
      ]
    ]
  },
  {
    "id": "9efcc6094bf22087",
    "type": "inject",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 580,
    "y": 2040,
    "wires": [
      [
        "8ec61da1e806f88a"
      ]
    ]
  },
  {
    "id": "d2a3ea3f9ca95bc2",
    "type": "debug",
    "z": "8ab98f5aa8b2c325",
    "name": "debug 30",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "true",
    "targetType": "full",
    "statusVal": "",
    "statusType": "auto",
    "x": 1640,
    "y": 1960,
    "wires": []
  },
  {
    "id": "6148ec1ebee3cc91",
    "type": "function",
    "z": "8ab98f5aa8b2c325",
    "name": " Set payload for play media ",
    "func": "var msg = {\n    \"payload\": {\n    \"data\": {\n      \"message\": \"test\"\n}}\n\n}\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 1420,
    "y": 700,
    "wires": [
      [
        "16132327bd2d415a"
      ]
    ]
  },
  {
    "id": "16132327bd2d415a",
    "type": "api-call-service",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "server": "7ab5c227.a3ce8c",
    "version": 5,
    "debugenabled": false,
    "domain": "tts",
    "service": "google_translate_say",
    "areaId": [],
    "deviceId": [],
    "entityId": [
      "media_player.group_home_speakers"
    ],
    "data": "",
    "dataType": "jsonata",
    "mergeContext": "",
    "mustacheAltTags": false,
    "outputProperties": [],
    "queue": "none",
    "x": 1720,
    "y": 700,
    "wires": [
      []
    ]
  },
  {
    "id": "e5e1f15a659ccc75",
    "type": "inject",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "1",
    "payloadType": "str",
    "x": 1130,
    "y": 720,
    "wires": [
      [
        "6148ec1ebee3cc91"
      ]
    ]
  },
  {
    "id": "12ee852fee6fc0cf",
    "type": "ha-get-entities",
    "z": "8ab98f5aa8b2c325",
    "name": "Get ChromecastMedia players",
    "server": "7ab5c227.a3ce8c",
    "version": 0,
    "rules": [
      {
        "property": "entity_id",
        "logic": "is",
        "value": "media_player\\.(?!plex).*_chromecast",
        "valueType": "re"
      },
      {
        "property": "state",
        "logic": "is",
        "value": "off",
        "valueType": "str"
      }
    ],
    "output_type": "split",
    "output_empty_results": false,
    "output_location_type": "msg",
    "output_location": "payload",
    "output_results_count": 1,
    "x": 890,
    "y": 1760,
    "wires": [
      [
        "985d0469249533f6"
      ]
    ]
  },
  {
    "id": "985d0469249533f6",
    "type": "delay",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "pauseType": "rate",
    "timeout": "5",
    "timeoutUnits": "seconds",
    "rate": "1",
    "nbRateUnits": "8",
    "rateUnits": "second",
    "randomFirst": "1",
    "randomLast": "5",
    "randomUnits": "seconds",
    "drop": false,
    "allowrate": false,
    "outputs": 1,
    "x": 1140,
    "y": 1760,
    "wires": [
      [
        "f14eb625a6d4f161"
      ]
    ]
  },
  {
    "id": "f14eb625a6d4f161",
    "type": "change",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "rules": [
      {
        "t": "set",
        "p": "payload.data.entity_id",
        "pt": "msg",
        "to": "payload.entity_id",
        "tot": "msg",
        "dc": true
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1390,
    "y": 1760,
    "wires": [
      [
        "63a57df1a95c168c"
      ]
    ]
  },
  {
    "id": "63a57df1a95c168c",
    "type": "api-call-service",
    "z": "8ab98f5aa8b2c325",
    "name": "play visuals",
    "server": "7ab5c227.a3ce8c",
    "version": 5,
    "debugenabled": false,
    "domain": "media_player",
    "service": "play_media",
    "areaId": [],
    "deviceId": [],
    "entityId": [],
    "data": "{\"media_content_id\":\"plex://{ \\\"playlist_name\\\": \\\"Automatic 4k Visuals\\\", \\\"shuffle\\\": 1 }\",\"media_content_type\":\"playlist\"}",
    "dataType": "json",
    "mergeContext": "",
    "mustacheAltTags": false,
    "outputProperties": [],
    "queue": "none",
    "x": 1630,
    "y": 1760,
    "wires": [
      [
        "10adc392a90025a6"
      ]
    ]
  },
  {
    "id": "10adc392a90025a6",
    "type": "api-call-service",
    "z": "8ab98f5aa8b2c325",
    "name": "Set volume to 0.1",
    "server": "7ab5c227.a3ce8c",
    "version": 5,
    "debugenabled": false,
    "domain": "media_player",
    "service": "volume_set",
    "areaId": [],
    "deviceId": [],
    "entityId": [],
    "data": "{\"volume_level\":\"0.1\"}",
    "dataType": "json",
    "mergeContext": "",
    "mustacheAltTags": false,
    "outputProperties": [],
    "queue": "none",
    "x": 1830,
    "y": 1760,
    "wires": [
      [
        "95a32241e207eb9a"
      ]
    ]
  },
  {
    "id": "95a32241e207eb9a",
    "type": "api-call-service",
    "z": "8ab98f5aa8b2c325",
    "name": "Mute Volume",
    "server": "7ab5c227.a3ce8c",
    "version": 5,
    "debugenabled": false,
    "domain": "media_player",
    "service": "volume_mute",
    "areaId": [],
    "deviceId": [],
    "entityId": [],
    "data": "{\"is_volume_muted\": \"true\"}",
    "dataType": "json",
    "mergeContext": "",
    "mustacheAltTags": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "data"
      }
    ],
    "queue": "none",
    "x": 2030,
    "y": 1760,
    "wires": [
      []
    ]
  },
  {
    "id": "708d9669756e700e",
    "type": "comment",
    "z": "8ab98f5aa8b2c325",
    "name": "Pull all inactive Chromecasts entities",
    "info": "",
    "x": 880,
    "y": 1720,
    "wires": []
  },
  {
    "id": "d746cd305bd77262",
    "type": "comment",
    "z": "8ab98f5aa8b2c325",
    "name": "rate limit at 1 per 8s",
    "info": "",
    "x": 1130,
    "y": 1720,
    "wires": []
  },
  {
    "id": "ac58cce6c851f9d7",
    "type": "comment",
    "z": "8ab98f5aa8b2c325",
    "name": "Extract the entity id",
    "info": "",
    "x": 1390,
    "y": 1720,
    "wires": []
  },
  {
    "id": "8399c939f27fcad9",
    "type": "comment",
    "z": "8ab98f5aa8b2c325",
    "name": "Start the 4k visuals playlist",
    "info": "",
    "x": 1630,
    "y": 1720,
    "wires": []
  },
  {
    "id": "438f63998b84b673",
    "type": "comment",
    "z": "8ab98f5aa8b2c325",
    "name": "Set volume to 0.1",
    "info": "",
    "x": 1840,
    "y": 1720,
    "wires": []
  },
  {
    "id": "177099fbcc15ce6c",
    "type": "comment",
    "z": "8ab98f5aa8b2c325",
    "name": "(bug mitigation)",
    "info": "The Google chromecasts don't always give the right volume, this forces an update",
    "x": 1840,
    "y": 1800,
    "wires": []
  },
  {
    "id": "165a3ae62bb0e7b4",
    "type": "comment",
    "z": "8ab98f5aa8b2c325",
    "name": "Mute the Tv",
    "info": "",
    "x": 2030,
    "y": 1720,
    "wires": []
  },
  {
    "id": "ac6060195e0707e6",
    "type": "inject",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 560,
    "y": 1800,
    "wires": [
      [
        "12ee852fee6fc0cf"
      ]
    ]
  },
  {
    "id": "01a38adc2883b0ed",
    "type": "inject",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "1",
    "payloadType": "str",
    "x": 270,
    "y": 120,
    "wires": [
      [
        "25740908779ed89b"
      ]
    ]
  },
  {
    "id": "25740908779ed89b",
    "type": "ha-get-entities",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "server": "7ab5c227.a3ce8c",
    "version": 0,
    "rules": [
      {
        "property": "attributes.administrative_area",
        "logic": "is",
        "value": "Bedroom",
        "valueType": "str"
      }
    ],
    "output_type": "array",
    "output_empty_results": false,
    "output_location_type": "msg",
    "output_location": "payload",
    "output_results_count": 1,
    "x": 450,
    "y": 120,
    "wires": [
      [
        "78c0882e7a439cbe"
      ]
    ]
  },
  {
    "id": "af599bf2cf3b63a0",
    "type": "ha-api",
    "z": "8ab98f5aa8b2c325",
    "name": "areas",
    "server": "7ab5c227.a3ce8c",
    "version": 1,
    "debugenabled": false,
    "protocol": "websocket",
    "method": "get",
    "path": "",
    "data": "{\"type\": \"config/area_registry/list\"}",
    "dataType": "json",
    "responseType": "json",
    "outputProperties": [
      {
        "property": "areas",
        "propertyType": "msg",
        "value": "",
        "valueType": "results"
      }
    ],
    "x": 374,
    "y": 604,
    "wires": [
      [
        "1692dc0f68fe3616"
      ]
    ]
  },
  {
    "id": "7f2838c4075f8656",
    "type": "inject",
    "z": "8ab98f5aa8b2c325",
    "name": "Manual Update",
    "repeat": "",
    "crontab": "",
    "once": true,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 180,
    "y": 604,
    "wires": [
      [
        "af599bf2cf3b63a0"
      ]
    ]
  },
  {
    "id": "1692dc0f68fe3616",
    "type": "ha-api",
    "z": "8ab98f5aa8b2c325",
    "name": "devices",
    "server": "7ab5c227.a3ce8c",
    "version": 1,
    "debugenabled": false,
    "protocol": "websocket",
    "method": "get",
    "path": "",
    "data": "{\"type\": \"config/device_registry/list\"}",
    "dataType": "json",
    "responseType": "json",
    "outputProperties": [
      {
        "property": "devices",
        "propertyType": "msg",
        "value": "",
        "valueType": "results"
      }
    ],
    "x": 520,
    "y": 560,
    "wires": [
      [
        "9b32c5bff6401de8"
      ]
    ]
  },
  {
    "id": "9b32c5bff6401de8",
    "type": "ha-api",
    "z": "8ab98f5aa8b2c325",
    "name": "entities",
    "server": "7ab5c227.a3ce8c",
    "version": 1,
    "debugenabled": false,
    "protocol": "websocket",
    "method": "get",
    "path": "",
    "data": "{\"type\": \"config/entity_registry/list\"}",
    "dataType": "json",
    "responseType": "json",
    "outputProperties": [
      {
        "property": "entities",
        "propertyType": "msg",
        "value": "",
        "valueType": "results"
      }
    ],
    "x": 680,
    "y": 500,
    "wires": [
      [
        "8daadb6602ec1528"
      ]
    ]
  },
  {
    "id": "a032bafbe360c775",
    "type": "debug",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "payload",
    "targetType": "msg",
    "x": 1004,
    "y": 604,
    "wires": []
  },
  {
    "id": "8daadb6602ec1528",
    "type": "function",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "func": "const entities = {};\n\nmsg.entities.forEach(e => {\n    if(!e.device_id) return;\n    \n    const device = msg.devices.find(d => d.id === e.device_id);\n    const area = msg.areas.find(a => a.area_id === device.area_id);\n    if(area) {\n        entities[e.entity_id] = {\n            area_id: area.area_id,\n            name: area.name\n        };\n    }\n});\n\nmsg.payload = entities;\nmsg.update = true;\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "x": 824,
    "y": 604,
    "wires": [
      [
        "a032bafbe360c775"
      ]
    ]
  },
  {
    "id": "6adcadcb1d6f6c25",
    "type": "ha-api",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "server": "7ab5c227.a3ce8c",
    "version": 1,
    "debugenabled": false,
    "protocol": "websocket",
    "method": "get",
    "path": "",
    "data": "{\t   \"type\":\"search/related\",\t   \"item_type\":\"area\",\t   \"item_id\":\"kitchen\"\t}",
    "dataType": "jsonata",
    "responseType": "json",
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "results"
      }
    ],
    "x": 370,
    "y": 440,
    "wires": [
      [
        "7711c397ae4f46b8"
      ]
    ]
  },
  {
    "id": "f0aa795f7467f496",
    "type": "inject",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 204,
    "y": 440,
    "wires": [
      [
        "6adcadcb1d6f6c25"
      ]
    ]
  },
  {
    "id": "7711c397ae4f46b8",
    "type": "debug",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 566,
    "y": 440,
    "wires": []
  },
  {
    "id": "8aeffb6fc961ba4c",
    "type": "function",
    "z": "8ab98f5aa8b2c325",
    "name": " Set payload for play media ",
    "func": "var msg = {\n    \"payload\": {\n      \"message\":   msg.message\n}\n\n}\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 520,
    "y": 760,
    "wires": [
      [
        "409cdd84649d5063"
      ]
    ]
  },
  {
    "id": "409cdd84649d5063",
    "type": "http request",
    "z": "8ab98f5aa8b2c325",
    "name": "POST request",
    "method": "POST",
    "ret": "obj",
    "paytoqs": "ignore",
    "url": "http://192.168.0.14:8085/broadcast",
    "tls": "",
    "persist": false,
    "proxy": "",
    "authType": "",
    "senderr": false,
    "headers": [],
    "x": 840,
    "y": 760,
    "wires": [
      []
    ]
  },
  {
    "id": "200460a5fceff893",
    "type": "change",
    "z": "8ab98f5aa8b2c325",
    "name": "Set Message and color",
    "rules": [
      {
        "t": "delete",
        "p": "payload",
        "pt": "msg"
      },
      {
        "t": "set",
        "p": "message",
        "pt": "msg",
        "to": "Water Damage Detected In The Kitchen",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "color_value",
        "pt": "msg",
        "to": "[0,255,255]",
        "tot": "json"
      },
      {
        "t": "set",
        "p": "dbrightness",
        "pt": "msg",
        "to": "100",
        "tot": "num"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 260,
    "y": 780,
    "wires": [
      [
        "8aeffb6fc961ba4c"
      ]
    ]
  },
  {
    "id": "29c622b87b857b2a",
    "type": "inject",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 120,
    "y": 720,
    "wires": [
      [
        "200460a5fceff893"
      ]
    ]
  },
  {
    "id": "4cb23e9433cf6f87",
    "type": "function",
    "z": "8ab98f5aa8b2c325",
    "name": " Set payload for play media ",
    "func": "var msg = {\n    \"payload\": {\n      \"message\":   \"broadcast to chillingroom speaker, this is a test \"\n}\n\n}\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 460,
    "y": 2820,
    "wires": [
      [
        "5dd8124a89b4bd00"
      ]
    ]
  },
  {
    "id": "5dd8124a89b4bd00",
    "type": "http request",
    "z": "8ab98f5aa8b2c325",
    "name": "POST request",
    "method": "POST",
    "ret": "obj",
    "paytoqs": "ignore",
    "url": "http://192.168.0.14:8085/broadcast",
    "tls": "",
    "persist": false,
    "proxy": "",
    "authType": "",
    "senderr": false,
    "headers": [],
    "x": 780,
    "y": 2820,
    "wires": [
      []
    ]
  },
  {
    "id": "6dbac789f6d12eb6",
    "type": "change",
    "z": "8ab98f5aa8b2c325",
    "name": "Set Message and color",
    "rules": [
      {
        "t": "delete",
        "p": "payload",
        "pt": "msg"
      },
      {
        "t": "set",
        "p": "message",
        "pt": "msg",
        "to": "Water Damage Detected In The Kitchen",
        "tot": "str"
      },
      {
        "t": "set",
        "p": "color_value",
        "pt": "msg",
        "to": "[0,255,255]",
        "tot": "json"
      },
      {
        "t": "set",
        "p": "dbrightness",
        "pt": "msg",
        "to": "100",
        "tot": "num"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 200,
    "y": 2840,
    "wires": [
      [
        "4cb23e9433cf6f87"
      ]
    ]
  },
  {
    "id": "212f0010b21e3078",
    "type": "inject",
    "z": "8ab98f5aa8b2c325",
    "name": "",
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 160,
    "y": 2740,
    "wires": [
      [
        "6dbac789f6d12eb6"
      ]
    ]
  }
]