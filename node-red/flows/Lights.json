[
  {
    "id": "17e87e6a7428d034",
    "type": "tab",
    "label": "Lights",
    "disabled": false,
    "info": ""
  },
  {
    "id": "ab19afa9f83a30a1",
    "type": "api-call-service",
    "z": "17e87e6a7428d034",
    "name": "Back door 6%",
    "server": "7ab5c227.a3ce8c",
    "version": 5,
    "debugenabled": false,
    "domain": "light",
    "service": "turn_on",
    "areaId": [],
    "deviceId": [],
    "entityId": [
      "light.back_door_light"
    ],
    "data": "{\"brightness_pct\":\"6\"}",
    "dataType": "json",
    "mergeContext": "",
    "mustacheAltTags": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "data"
      }
    ],
    "queue": "none",
    "x": 640,
    "y": 900,
    "wires": [
      []
    ]
  },
  {
    "id": "cddd2cdfb0fa4cec",
    "type": "server-state-changed",
    "z": "17e87e6a7428d034",
    "name": "",
    "server": "7ab5c227.a3ce8c",
    "version": 4,
    "exposeToHomeAssistant": false,
    "haConfig": [
      {
        "property": "name",
        "value": ""
      },
      {
        "property": "icon",
        "value": ""
      }
    ],
    "entityidfilter": "light.back_door_light",
    "entityidfiltertype": "exact",
    "outputinitially": false,
    "state_type": "str",
    "haltifstate": "on",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "outputs": 2,
    "output_only_on_state_change": true,
    "for": "0",
    "forType": "num",
    "forUnits": "minutes",
    "ignorePrevStateNull": false,
    "ignorePrevStateUnknown": false,
    "ignorePrevStateUnavailable": false,
    "ignoreCurrentStateUnknown": false,
    "ignoreCurrentStateUnavailable": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "eventData"
      },
      {
        "property": "topic",
        "propertyType": "msg",
        "value": "",
        "valueType": "triggerId"
      }
    ],
    "x": 200,
    "y": 900,
    "wires": [
      [
        "28f432ea822fff7e"
      ],
      []
    ]
  },
  {
    "id": "48690bd0d5aa27c0",
    "type": "poll-state",
    "z": "17e87e6a7428d034",
    "name": "",
    "server": "7ab5c227.a3ce8c",
    "version": 2,
    "exposeToHomeAssistant": false,
    "haConfig": [
      {
        "property": "name",
        "value": ""
      },
      {
        "property": "icon",
        "value": ""
      }
    ],
    "updateinterval": "2",
    "updateIntervalType": "num",
    "updateIntervalUnits": "hours",
    "outputinitially": false,
    "outputonchanged": true,
    "entity_id": "sun.sun",
    "state_type": "str",
    "halt_if": "",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "outputs": 1,
    "x": 170,
    "y": 1160,
    "wires": [
      [
        "cb186987cf766bb4",
        "92b9d4d022fb97b0"
      ]
    ]
  },
  {
    "id": "cb186987cf766bb4",
    "type": "switch",
    "z": "17e87e6a7428d034",
    "name": "",
    "property": "payload",
    "propertyType": "msg",
    "rules": [
      {
        "t": "cont",
        "v": "below",
        "vt": "str"
      },
      {
        "t": "cont",
        "v": "above_horizon",
        "vt": "str"
      }
    ],
    "checkall": "true",
    "repair": false,
    "outputs": 2,
    "x": 530,
    "y": 1160,
    "wires": [
      [
        "9908bc8610984a80"
      ],
      []
    ]
  },
  {
    "id": "94184365ae7b7621",
    "type": "inject",
    "z": "17e87e6a7428d034",
    "name": "",
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "below_horizon",
    "payloadType": "str",
    "x": 150,
    "y": 960,
    "wires": [
      []
    ]
  },
  {
    "id": "92b9d4d022fb97b0",
    "type": "trigger",
    "z": "17e87e6a7428d034",
    "name": "",
    "op1": "",
    "op2": "0",
    "op1type": "pay",
    "op2type": "str",
    "duration": "-3",
    "extend": false,
    "overrideDelay": false,
    "units": "min",
    "reset": "above_horizon",
    "bytopic": "all",
    "topic": "topic",
    "outputs": 1,
    "x": 370,
    "y": 1200,
    "wires": [
      [
        "cb186987cf766bb4"
      ]
    ]
  },
  {
    "id": "0ffe5761dfa6f9df",
    "type": "api-call-service",
    "z": "17e87e6a7428d034",
    "name": "",
    "server": "7ab5c227.a3ce8c",
    "version": 5,
    "debugenabled": false,
    "domain": "light",
    "service": "turn_off",
    "areaId": [],
    "deviceId": [],
    "entityId": [
      "light.back_door_light"
    ],
    "data": "",
    "dataType": "json",
    "mergeContext": "",
    "mustacheAltTags": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "data"
      }
    ],
    "queue": "none",
    "x": 1170,
    "y": 1160,
    "wires": [
      []
    ]
  },
  {
    "id": "28f432ea822fff7e",
    "type": "debug",
    "z": "17e87e6a7428d034",
    "name": "",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "true",
    "targetType": "full",
    "x": 440,
    "y": 900,
    "wires": []
  },
  {
    "id": "030b33d510929c18",
    "type": "switch",
    "z": "17e87e6a7428d034",
    "name": "",
    "property": "data.old_state.state",
    "propertyType": "msg",
    "rules": [
      {
        "t": "cont",
        "v": "off",
        "vt": "str"
      },
      {
        "t": "cont",
        "v": "on",
        "vt": "str"
      }
    ],
    "checkall": "true",
    "repair": false,
    "outputs": 2,
    "x": 450,
    "y": 940,
    "wires": [
      [
        "ab19afa9f83a30a1"
      ],
      [
        "d1f32ca6f0845ba3"
      ]
    ]
  },
  {
    "id": "d1f32ca6f0845ba3",
    "type": "api-call-service",
    "z": "17e87e6a7428d034",
    "name": "Back door 50%",
    "server": "7ab5c227.a3ce8c",
    "version": 5,
    "debugenabled": false,
    "domain": "light",
    "service": "turn_on",
    "areaId": [],
    "deviceId": [],
    "entityId": [
      "light.back_door_light"
    ],
    "data": "{\"brightness_pct\":\"50\"}",
    "dataType": "json",
    "mergeContext": "",
    "mustacheAltTags": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "data"
      }
    ],
    "queue": "none",
    "x": 640,
    "y": 980,
    "wires": [
      []
    ]
  },
  {
    "id": "e6e81999e0dbffc6",
    "type": "api-call-service",
    "z": "17e87e6a7428d034",
    "name": "Back door 100 white",
    "server": "7ab5c227.a3ce8c",
    "version": 5,
    "debugenabled": false,
    "domain": "light",
    "service": "turn_on",
    "areaId": [],
    "deviceId": [],
    "entityId": [
      "light.back_door_light"
    ],
    "data": "{\"color_name\":\"white\",\"brightness_pct\":\"100\"}",
    "dataType": "json",
    "mergeContext": "",
    "mustacheAltTags": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "data"
      }
    ],
    "queue": "none",
    "x": 1140,
    "y": 1880,
    "wires": [
      []
    ]
  },
  {
    "id": "3693c538eafb6dec",
    "type": "server-state-changed",
    "z": "17e87e6a7428d034",
    "name": "",
    "server": "7ab5c227.a3ce8c",
    "version": 4,
    "exposeToHomeAssistant": false,
    "haConfig": [
      {
        "property": "name",
        "value": ""
      },
      {
        "property": "icon",
        "value": ""
      }
    ],
    "entityidfilter": "sensor.geovision_persons",
    "entityidfiltertype": "exact",
    "outputinitially": false,
    "state_type": "str",
    "haltifstate": "(0|1|2)",
    "halt_if_type": "re",
    "halt_if_compare": "is",
    "outputs": 2,
    "output_only_on_state_change": true,
    "for": "0",
    "forType": "num",
    "forUnits": "minutes",
    "ignorePrevStateNull": false,
    "ignorePrevStateUnknown": false,
    "ignorePrevStateUnavailable": false,
    "ignoreCurrentStateUnknown": false,
    "ignoreCurrentStateUnavailable": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "eventData"
      },
      {
        "property": "topic",
        "propertyType": "msg",
        "value": "",
        "valueType": "triggerId"
      }
    ],
    "x": 420,
    "y": 1840,
    "wires": [
      [
        "77ff410b30c82d70"
      ],
      []
    ]
  },
  {
    "id": "db8a264370e69bd1",
    "type": "api-call-service",
    "z": "17e87e6a7428d034",
    "name": "",
    "server": "7ab5c227.a3ce8c",
    "version": 5,
    "debugenabled": false,
    "domain": "light",
    "service": "turn_off",
    "areaId": [],
    "deviceId": [],
    "entityId": [
      "light.back_door_light"
    ],
    "data": "",
    "dataType": "json",
    "mergeContext": "",
    "mustacheAltTags": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "data"
      }
    ],
    "queue": "none",
    "x": 850,
    "y": 1880,
    "wires": [
      []
    ]
  },
  {
    "id": "2f0b53d8218e08cb",
    "type": "api-call-service",
    "z": "17e87e6a7428d034",
    "name": "Back door 65white",
    "server": "7ab5c227.a3ce8c",
    "version": 5,
    "debugenabled": false,
    "domain": "light",
    "service": "turn_on",
    "areaId": [],
    "deviceId": [],
    "entityId": [
      "light.back_door_light"
    ],
    "data": "{\"color_name\":\"white\",\"brightness_pct\":\"65\"}",
    "dataType": "json",
    "mergeContext": "",
    "mustacheAltTags": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "data"
      }
    ],
    "queue": "none",
    "x": 1150,
    "y": 1840,
    "wires": [
      []
    ]
  },
  {
    "id": "c7688e6ad81af324",
    "type": "api-current-state",
    "z": "17e87e6a7428d034",
    "name": "",
    "server": "7ab5c227.a3ce8c",
    "version": 3,
    "outputs": 2,
    "halt_if": "unlocked",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "lock.back_door",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [],
    "for": 0,
    "forType": "num",
    "forUnits": "minutes",
    "x": 890,
    "y": 1840,
    "wires": [
      [
        "2f0b53d8218e08cb"
      ],
      [
        "e6e81999e0dbffc6"
      ]
    ]
  },
  {
    "id": "77ff410b30c82d70",
    "type": "switch",
    "z": "17e87e6a7428d034",
    "name": "",
    "property": "payload",
    "propertyType": "msg",
    "rules": [
      {
        "t": "gt",
        "v": "0",
        "vt": "num"
      },
      {
        "t": "cont",
        "v": "0",
        "vt": "str"
      },
      {
        "t": "cont",
        "v": "1",
        "vt": "str"
      }
    ],
    "checkall": "true",
    "repair": false,
    "outputs": 3,
    "x": 670,
    "y": 1840,
    "wires": [
      [
        "c7688e6ad81af324"
      ],
      [
        "db8a264370e69bd1"
      ],
      [
        "c7688e6ad81af324"
      ]
    ]
  },
  {
    "id": "9908bc8610984a80",
    "type": "api-current-state",
    "z": "17e87e6a7428d034",
    "name": "Kink?",
    "server": "7ab5c227.a3ce8c",
    "version": 3,
    "outputs": 2,
    "halt_if": "off",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "input_boolean.kink_party",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "for": 0,
    "forType": "num",
    "forUnits": "minutes",
    "x": 690,
    "y": 1160,
    "wires": [
      [
        "3cbe475172a6ab19"
      ],
      []
    ]
  },
  {
    "id": "3cbe475172a6ab19",
    "type": "api-current-state",
    "z": "17e87e6a7428d034",
    "name": "psychs",
    "server": "7ab5c227.a3ce8c",
    "version": 3,
    "outputs": 2,
    "halt_if": "off",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "input_boolean.acid_time",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "entity.entity_id",
        "propertyType": "msg",
        "value": "",
        "valueType": "triggerId"
      }
    ],
    "for": 0,
    "forType": "num",
    "forUnits": "minutes",
    "override_topic": false,
    "state_location": "payload",
    "override_payload": "msg",
    "entity_location": "data",
    "override_data": "msg",
    "x": 890,
    "y": 1160,
    "wires": [
      [
        "0ffe5761dfa6f9df"
      ],
      []
    ]
  },
  {
    "id": "f804d3fdcbcb9035",
    "type": "comment",
    "z": "17e87e6a7428d034",
    "name": "",
    "info": "",
    "x": 100,
    "y": 900,
    "wires": []
  },
  {
    "id": "5788d345103917bd",
    "type": "comment",
    "z": "17e87e6a7428d034",
    "name": "",
    "info": "",
    "x": 100,
    "y": 1160,
    "wires": []
  },
  {
    "id": "a010f0d06ca3253c",
    "type": "comment",
    "z": "17e87e6a7428d034",
    "name": "",
    "info": "",
    "x": 280,
    "y": 1840,
    "wires": []
  },
  {
    "id": "9c12ef115ca5a474",
    "type": "inject",
    "z": "17e87e6a7428d034",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 420,
    "y": 800,
    "wires": [
      []
    ]
  }
]