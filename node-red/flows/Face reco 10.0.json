[
  {
    "id": "cd7a606d7931c143",
    "type": "tab",
    "label": "Face reco 10.0",
    "disabled": false,
    "info": "",
    "env": []
  },
  {
    "id": "d5035d7a4b8abde0",
    "type": "junction",
    "z": "cd7a606d7931c143",
    "x": 1460,
    "y": 300,
    "wires": [
      [
        "b1c8c154f909e20e"
      ]
    ]
  },
  {
    "id": "e8ce77d8da41bd8e",
    "type": "junction",
    "z": "cd7a606d7931c143",
    "x": 1460,
    "y": 340,
    "wires": [
      [
        "7ea8405b5138a79a"
      ]
    ]
  },
  {
    "id": "b1c8c154f909e20e",
    "type": "junction",
    "z": "cd7a606d7931c143",
    "x": 1560,
    "y": 300,
    "wires": [
      [
        "8a86d116cbd23a0c"
      ]
    ]
  },
  {
    "id": "7ea8405b5138a79a",
    "type": "junction",
    "z": "cd7a606d7931c143",
    "x": 1560,
    "y": 340,
    "wires": [
      [
        "7755d95655d67413"
      ]
    ]
  },
  {
    "id": "f1e47b926b68837c",
    "type": "junction",
    "z": "cd7a606d7931c143",
    "x": 2740,
    "y": 320,
    "wires": [
      [
        "6d399809f46da187"
      ]
    ]
  },
  {
    "id": "0f8df3cecc7769a3",
    "type": "junction",
    "z": "cd7a606d7931c143",
    "x": 2760,
    "y": 360,
    "wires": [
      [
        "de1538bda5a59999"
      ]
    ]
  },
  {
    "id": "6d399809f46da187",
    "type": "junction",
    "z": "cd7a606d7931c143",
    "x": 2840,
    "y": 320,
    "wires": [
      [
        "84662acf4451979c"
      ]
    ]
  },
  {
    "id": "de1538bda5a59999",
    "type": "junction",
    "z": "cd7a606d7931c143",
    "x": 2840,
    "y": 360,
    "wires": [
      [
        "fdc333b7d683f18c"
      ]
    ]
  },
  {
    "id": "a4c688e86f5f2b80",
    "type": "junction",
    "z": "cd7a606d7931c143",
    "x": 3480,
    "y": 260,
    "wires": [
      [
        "acdce7f00366b401"
      ]
    ]
  },
  {
    "id": "79ea6e5eebeb3dc4",
    "type": "junction",
    "z": "cd7a606d7931c143",
    "x": 1980,
    "y": 260,
    "wires": [
      [
        "a338a4e199a28d06"
      ]
    ]
  },
  {
    "id": "a338a4e199a28d06",
    "type": "junction",
    "z": "cd7a606d7931c143",
    "x": 2080,
    "y": 260,
    "wires": [
      [
        "a4c688e86f5f2b80"
      ]
    ]
  },
  {
    "id": "1d8a1bf5c390d165",
    "type": "junction",
    "z": "cd7a606d7931c143",
    "x": 1980,
    "y": 340,
    "wires": [
      [
        "7755d95655d67413"
      ]
    ]
  },
  {
    "id": "94e15e45a5dd4895",
    "type": "junction",
    "z": "cd7a606d7931c143",
    "x": 3280,
    "y": 300,
    "wires": [
      [
        "c177ff1a1286070d"
      ]
    ]
  },
  {
    "id": "13611f4c75079d74",
    "type": "junction",
    "z": "cd7a606d7931c143",
    "x": 3280,
    "y": 340,
    "wires": [
      [
        "b85c085ce5640b8f"
      ]
    ]
  },
  {
    "id": "c177ff1a1286070d",
    "type": "junction",
    "z": "cd7a606d7931c143",
    "x": 3380,
    "y": 300,
    "wires": [
      [
        "a4c688e86f5f2b80"
      ]
    ]
  },
  {
    "id": "b85c085ce5640b8f",
    "type": "junction",
    "z": "cd7a606d7931c143",
    "x": 3380,
    "y": 340,
    "wires": [
      [
        "fdc333b7d683f18c"
      ]
    ]
  },
  {
    "id": "fdc333b7d683f18c",
    "type": "junction",
    "z": "cd7a606d7931c143",
    "x": 3480,
    "y": 360,
    "wires": [
      [
        "759704f763b58501"
      ]
    ]
  },
  {
    "id": "5197a8dcb4f7e262",
    "type": "api-call-service",
    "z": "cd7a606d7931c143",
    "name": "Save Facecam Ring.jpg For Debug",
    "server": "7ab5c227.a3ce8c",
    "version": 5,
    "debugenabled": false,
    "domain": "camera",
    "service": "snapshot",
    "areaId": [],
    "deviceId": [],
    "entityId": [
      "camera.faceshot_go2rtc"
    ],
    "data": "{\"filename\":\"/config/www/ring.jpg\"}",
    "dataType": "json",
    "mergeContext": "",
    "mustacheAltTags": false,
    "outputProperties": [],
    "queue": "none",
    "x": 600,
    "y": 320,
    "wires": [
      [
        "e9bcf0e19b27ce97"
      ]
    ]
  },
  {
    "id": "8356b51a9007c3b7",
    "type": "http request",
    "z": "cd7a606d7931c143",
    "name": "POST request with ring picture",
    "method": "GET",
    "ret": "obj",
    "paytoqs": "ignore",
    "url": "http://192.168.0.14:3000/api/recognize?url=http://192.168.0.15:8123/local/ring.jpg&camera=faceshot_camera",
    "tls": "",
    "persist": false,
    "proxy": "",
    "insecureHTTPParser": false,
    "authType": "",
    "senderr": false,
    "headers": [],
    "x": 1070,
    "y": 320,
    "wires": [
      [
        "9d26e1a43b7468d6"
      ]
    ]
  },
  {
    "id": "e9bcf0e19b27ce97",
    "type": "trigger",
    "z": "cd7a606d7931c143",
    "name": "1s Cooldown",
    "op1": "",
    "op2": "",
    "op1type": "nul",
    "op2type": "pay",
    "duration": "1",
    "extend": false,
    "overrideDelay": false,
    "units": "s",
    "reset": "",
    "bytopic": "all",
    "topic": "topic",
    "outputs": 1,
    "x": 830,
    "y": 320,
    "wires": [
      [
        "8356b51a9007c3b7"
      ]
    ]
  },
  {
    "id": "9bdca88a7d4fd421",
    "type": "server-state-changed",
    "z": "cd7a606d7931c143",
    "name": "Doorbell",
    "server": "7ab5c227.a3ce8c",
    "version": 4,
    "exposeToHomeAssistant": false,
    "haConfig": [
      {
        "property": "name",
        "value": ""
      },
      {
        "property": "icon",
        "value": ""
      }
    ],
    "entityidfilter": "sensor.remote_doorbell_button_action",
    "entityidfiltertype": "exact",
    "outputinitially": false,
    "state_type": "str",
    "haltifstate": "None",
    "halt_if_type": "str",
    "halt_if_compare": "is_not",
    "outputs": 2,
    "output_only_on_state_change": true,
    "for": 0,
    "forType": "num",
    "forUnits": "minutes",
    "ignorePrevStateNull": true,
    "ignorePrevStateUnknown": true,
    "ignorePrevStateUnavailable": true,
    "ignoreCurrentStateUnknown": true,
    "ignoreCurrentStateUnavailable": true,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "eventData"
      },
      {
        "property": "topic",
        "propertyType": "msg",
        "value": "",
        "valueType": "triggerId"
      }
    ],
    "x": 140,
    "y": 320,
    "wires": [
      [],
      []
    ]
  },
  {
    "id": "ce230f98044f9ce1",
    "type": "trigger",
    "z": "cd7a606d7931c143",
    "name": "2 minutes",
    "op1": "",
    "op2": "",
    "op1type": "pay",
    "op2type": "nul",
    "duration": "2",
    "extend": false,
    "overrideDelay": false,
    "units": "ms",
    "reset": "",
    "bytopic": "all",
    "topic": "topic",
    "outputs": 1,
    "x": 340,
    "y": 320,
    "wires": [
      [
        "5197a8dcb4f7e262",
        "757ceece5ae2a82f"
      ]
    ]
  },
  {
    "id": "acdce7f00366b401",
    "type": "debug",
    "z": "cd7a606d7931c143",
    "name": "debug 196",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "true",
    "targetType": "full",
    "statusVal": "",
    "statusType": "auto",
    "x": 3630,
    "y": 260,
    "wires": []
  },
  {
    "id": "ebe93d01362801ad",
    "type": "inject",
    "z": "cd7a606d7931c143",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 1360,
    "y": 60,
    "wires": [
      [
        "8356b51a9007c3b7"
      ]
    ]
  },
  {
    "id": "757ceece5ae2a82f",
    "type": "api-call-service",
    "z": "cd7a606d7931c143",
    "name": "Turn on Door Rang",
    "server": "7ab5c227.a3ce8c",
    "version": 5,
    "debugenabled": false,
    "domain": "homeassistant",
    "service": "turn_on",
    "areaId": [],
    "deviceId": [],
    "entityId": [
      "input_boolean.door_rang"
    ],
    "data": "",
    "dataType": "json",
    "mergeContext": "",
    "mustacheAltTags": false,
    "outputProperties": [],
    "queue": "none",
    "x": 550,
    "y": 400,
    "wires": [
      [
        "19d4608aca40257c"
      ]
    ]
  },
  {
    "id": "19d4608aca40257c",
    "type": "ha-wait-until",
    "z": "cd7a606d7931c143",
    "name": "Wait for door to lock",
    "server": "7ab5c227.a3ce8c",
    "version": 2,
    "outputs": 2,
    "entityId": "lock.lock_front_door",
    "entityIdFilterType": "exact",
    "property": "state",
    "comparator": "is",
    "value": "locked",
    "valueType": "str",
    "timeout": "3",
    "timeoutType": "num",
    "timeoutUnits": "minutes",
    "checkCurrentState": false,
    "blockInputOverrides": true,
    "outputProperties": [],
    "x": 760,
    "y": 400,
    "wires": [
      [
        "fec1201a9f096ec4"
      ],
      [
        "fec1201a9f096ec4"
      ]
    ]
  },
  {
    "id": "fec1201a9f096ec4",
    "type": "api-call-service",
    "z": "cd7a606d7931c143",
    "name": "Turn off \"Door rang\"",
    "server": "7ab5c227.a3ce8c",
    "version": 5,
    "debugenabled": false,
    "domain": "homeassistant",
    "service": "turn_off",
    "areaId": [],
    "deviceId": [],
    "entityId": [
      "input_boolean.door_rang"
    ],
    "data": "",
    "dataType": "json",
    "mergeContext": "",
    "mustacheAltTags": false,
    "outputProperties": [],
    "queue": "none",
    "x": 980,
    "y": 400,
    "wires": [
      []
    ]
  },
  {
    "id": "9d26e1a43b7468d6",
    "type": "switch",
    "z": "cd7a606d7931c143",
    "name": "Are there matches?",
    "property": "payload.counts.match",
    "propertyType": "msg",
    "rules": [
      {
        "t": "gt",
        "v": "0",
        "vt": "num"
      },
      {
        "t": "eq",
        "v": "0",
        "vt": "num"
      }
    ],
    "checkall": "true",
    "repair": false,
    "outputs": 2,
    "x": 1330,
    "y": 320,
    "wires": [
      [
        "d5035d7a4b8abde0",
        "dc5c22f8fb2385a7"
      ],
      [
        "e8ce77d8da41bd8e"
      ]
    ]
  },
  {
    "id": "87766266822443bf",
    "type": "comment",
    "z": "cd7a606d7931c143",
    "name": "Yes",
    "info": "",
    "x": 2030,
    "y": 260,
    "wires": []
  },
  {
    "id": "ca41cbd48ba54a0e",
    "type": "comment",
    "z": "cd7a606d7931c143",
    "name": "No",
    "info": "",
    "x": 1510,
    "y": 340,
    "wires": []
  },
  {
    "id": "8a86d116cbd23a0c",
    "type": "change",
    "z": "cd7a606d7931c143",
    "name": "Set msg.match",
    "rules": [
      {
        "t": "set",
        "p": "match",
        "pt": "msg",
        "to": "payload.matches[0]",
        "tot": "msg",
        "dc": true
      },
      {
        "t": "set",
        "p": "match.camera",
        "pt": "msg",
        "to": "payload.camera",
        "tot": "msg",
        "dc": true
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1660,
    "y": 300,
    "wires": [
      [
        "c4c2d8ee6f80df16"
      ]
    ]
  },
  {
    "id": "7755d95655d67413",
    "type": "http request",
    "z": "cd7a606d7931c143",
    "name": "POST request with Reolink-double-take last image",
    "method": "GET",
    "ret": "obj",
    "paytoqs": "ignore",
    "url": "http://192.168.0.14:3000/api/recognize?url=http://192.168.0.14:3000/api/storage/latest/front_door_camera.jpg&camera=front_door_camera",
    "tls": "",
    "persist": false,
    "proxy": "",
    "insecureHTTPParser": false,
    "authType": "",
    "senderr": false,
    "headers": [],
    "x": 2310,
    "y": 340,
    "wires": [
      [
        "e1b5a65264dfc11d"
      ]
    ]
  },
  {
    "id": "9323da00227c8c8b",
    "type": "inject",
    "z": "cd7a606d7931c143",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 1980,
    "y": 460,
    "wires": [
      [
        "7755d95655d67413"
      ]
    ]
  },
  {
    "id": "e1b5a65264dfc11d",
    "type": "switch",
    "z": "cd7a606d7931c143",
    "name": "Are there matches?",
    "property": "payload.counts.match",
    "propertyType": "msg",
    "rules": [
      {
        "t": "gt",
        "v": "0",
        "vt": "num"
      },
      {
        "t": "eq",
        "v": "0",
        "vt": "num"
      }
    ],
    "checkall": "true",
    "repair": false,
    "outputs": 2,
    "x": 2610,
    "y": 340,
    "wires": [
      [
        "f1e47b926b68837c"
      ],
      [
        "0f8df3cecc7769a3"
      ]
    ]
  },
  {
    "id": "b2a4e650595bca7e",
    "type": "comment",
    "z": "cd7a606d7931c143",
    "name": "Yes",
    "info": "",
    "x": 2790,
    "y": 320,
    "wires": []
  },
  {
    "id": "e204bf79e084d730",
    "type": "comment",
    "z": "cd7a606d7931c143",
    "name": "No",
    "info": "",
    "x": 2790,
    "y": 360,
    "wires": []
  },
  {
    "id": "44af510b1d02e54e",
    "type": "inject",
    "z": "cd7a606d7931c143",
    "name": "Maxi at door",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "data",
        "v": "{\"entity_id\":\"sensor.double_take_front_door\",\"state\":\"3\",\"attributes\":{\"id\":\"1659459685.953183-1shuyf\",\"duration\":3.53,\"timestamp\":\"2022-08-02T17:01:31.497Z\",\"attempts\":11,\"camera\":\"front_door\",\"zones\":[\"entrance\",\"faceshot_zone\"],\"misses\":[{\"name\":\"alphonso\",\"confidence\":79.16,\"match\":false,\"box\":{\"top\":210,\"left\":529,\"width\":85,\"height\":105},\"checks\":[\"box area too low: 8925 < 10000\"],\"type\":\"latest\",\"duration\":0.21,\"detector\":\"deepstack\",\"filename\":\"bcfcd360-f639-45ef-97fa-2f68aa01d8eb.jpg\",\"base64\":null},{\"name\":\"maxi\",\"confidence\":75.7,\"match\":false,\"box\":{\"top\":212,\"left\":354,\"width\":62,\"height\":95},\"checks\":[\"box area too low: 5890 < 10000\"],\"type\":\"latest\",\"duration\":0.19,\"detector\":\"deepstack\",\"filename\":\"49e449d6-65e0-45c6-a21d-237a673b91da.jpg\",\"base64\":null}],\"matches\":[{\"name\":\"maxi\",\"confidence\":72.28,\"match\":true,\"box\":{\"top\":220,\"left\":244,\"width\":102,\"height\":104},\"type\":\"latest\",\"duration\":0.19,\"detector\":\"deepstack\",\"filename\":\"2a731787-cb90-4c90-bbc2-05e910f1576e.jpg\",\"base64\":null},{\"name\":\"nate\",\"confidence\":72.15,\"match\":true,\"box\":{\"top\":228,\"left\":203,\"width\":106,\"height\":98},\"type\":\"snapshot\",\"duration\":0.2,\"detector\":\"deepstack\",\"filename\":\"b5678550-20b0-4b04-a1b5-db4297d7a7ed.jpg\",\"base64\":null}],\"personCount\":3,\"icon\":\"mdi:camera\",\"friendly_name\":\"double_take_front_door\"},\"last_changed\":\"2022-08-02T17:01:31.518682+00:00\",\"last_updated\":\"2022-08-02T17:01:31.518682+00:00\",\"context\":{\"id\":\"01G9FR2RZYY9SBNXVSHJ5T9E0S\",\"parent_id\":null,\"user_id\":null},\"timeSinceChangedMs\":1499,\"original_state\":\"3\"}",
        "vt": "json"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "sensor.remote_doorbell_button_action",
    "payload": "3",
    "payloadType": "num",
    "x": 2970,
    "y": 460,
    "wires": [
      [
        "fdc333b7d683f18c"
      ]
    ]
  },
  {
    "id": "b2c03746e03a6726",
    "type": "function",
    "z": "cd7a606d7931c143",
    "name": "JavascriptNotification setter Reolink",
    "func": "var name = \"Someone\";\nvar url1 = \"https://hass.purgatoire.ca/local/reolinkring.jpg\";\nvar url2 = \"https://hass.purgatoire.ca/local/ring.jpg\";\nvar random = Date.now();\n\nvar newMsg = {\n\t\"payload\": {\n\t\t\"data\": {\n\t\t\t\"message\": \"Doorbell Alert\",\n\t\t\t\"title\": name + \" is at the door\",\n\t\t\t\"data\": {\n\t\t\t\t\"sticky\": 'true',\n\t\t\t\t\"clickAction\": '/phone-landing/reolink?kiosk=1',\n\t\t\t\t\"priority\": 'high',\n\t\t\t\t\"image\": url1 + \"?\" + random,\n\t\t\t\t\"actions\": [{\n\t\t\t\t\t\t\"action\": \"REPLY\",\n\t\t\t\t\t\t\"title\": \"Enter Text\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"action\": \"unlock_door\",\n\t\t\t\t\t\t\"title\": \"Unlock The Door\"\n\t\t\t\t\t}\n\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t}\n};\nreturn newMsg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 3900,
    "y": 360,
    "wires": [
      [
        "7e46a3d713abf079",
        "1a15e85a29c4f2bf"
      ]
    ]
  },
  {
    "id": "7e46a3d713abf079",
    "type": "api-call-service",
    "z": "cd7a606d7931c143",
    "name": "",
    "server": "7ab5c227.a3ce8c",
    "version": 5,
    "debugenabled": false,
    "domain": "notify",
    "service": "mobile_app_phone_galaxy_fold_4",
    "areaId": [],
    "deviceId": [],
    "entityId": [],
    "data": "",
    "dataType": "json",
    "mergeContext": "",
    "mustacheAltTags": false,
    "outputProperties": [],
    "queue": "none",
    "x": 4240,
    "y": 400,
    "wires": [
      []
    ]
  },
  {
    "id": "759704f763b58501",
    "type": "api-call-service",
    "z": "cd7a606d7931c143",
    "name": "Save Reolink.jpg for notif",
    "server": "7ab5c227.a3ce8c",
    "version": 5,
    "debugenabled": false,
    "domain": "camera",
    "service": "snapshot",
    "areaId": [],
    "deviceId": [],
    "entityId": [
      "camera.front_door_go2rtc"
    ],
    "data": "{\"filename\":\"/config/www/reolinkring.jpg\"}",
    "dataType": "json",
    "mergeContext": "",
    "mustacheAltTags": false,
    "outputProperties": [],
    "queue": "none",
    "x": 3610,
    "y": 360,
    "wires": [
      [
        "b2c03746e03a6726",
        "4d080cad7eb6e607"
      ]
    ]
  },
  {
    "id": "4d080cad7eb6e607",
    "type": "function",
    "z": "cd7a606d7931c143",
    "name": "Notification setter Facecam",
    "func": "var name = \"Someone\";\nvar url1 = \"https://hass.purgatoire.ca/local/reolinkring.jpg\";\nvar url2 = \"https://hass.purgatoire.ca/local/ring.jpg\";\nvar random = Date.now();\n\nvar newMsg = {\n\t\"payload\": {\n\t\t\"data\": {\n\t\t\t\"message\": \"Doorbell Alert\",\n\t\t\t\"title\": name + \" is at the door\",\n\t\t\t\"data\": {\n\t\t\t\t\"sticky\": 'true',\n\t\t\t\t\"clickAction\": '/phone-landing/reolink?kiosk=1',\n\t\t\t\t\"priority\": 'high',\n\t\t\t\t\"image\": url2 + \"?\" + random,\n\t\t\t\t\"actions\": [{\n\t\t\t\t\t\"action\": \"REPLY\",\n\t\t\t\t\t\"title\": \"Enter Text\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"action\": \"unlock_door\",\n\t\t\t\t\t\"title\": \"Unlock The Door\"\n\t\t\t\t}\n\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t}\n};\nreturn newMsg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 3900,
    "y": 400,
    "wires": [
      [
        "7e46a3d713abf079"
      ]
    ]
  },
  {
    "id": "7b4039020f84dc97",
    "type": "inject",
    "z": "cd7a606d7931c143",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 440,
    "y": 200,
    "wires": [
      [
        "5197a8dcb4f7e262"
      ]
    ]
  },
  {
    "id": "dc5c22f8fb2385a7",
    "type": "debug",
    "z": "cd7a606d7931c143",
    "name": "debug 199",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "true",
    "targetType": "full",
    "statusVal": "",
    "statusType": "auto",
    "x": 1550,
    "y": 100,
    "wires": []
  },
  {
    "id": "c4c2d8ee6f80df16",
    "type": "switch",
    "z": "cd7a606d7931c143",
    "name": "confidence over 80%?",
    "property": "match.confidence",
    "propertyType": "msg",
    "rules": [
      {
        "t": "gt",
        "v": "80",
        "vt": "num"
      },
      {
        "t": "lt",
        "v": "80",
        "vt": "num"
      }
    ],
    "checkall": "true",
    "repair": false,
    "outputs": 2,
    "x": 1860,
    "y": 300,
    "wires": [
      [
        "79ea6e5eebeb3dc4"
      ],
      [
        "1d8a1bf5c390d165"
      ]
    ]
  },
  {
    "id": "eff0a4e4802948b8",
    "type": "comment",
    "z": "cd7a606d7931c143",
    "name": "No",
    "info": "",
    "x": 2030,
    "y": 340,
    "wires": []
  },
  {
    "id": "84662acf4451979c",
    "type": "change",
    "z": "cd7a606d7931c143",
    "name": "Set msg.match",
    "rules": [
      {
        "t": "set",
        "p": "match",
        "pt": "msg",
        "to": "payload.matches[0]",
        "tot": "msg",
        "dc": true
      },
      {
        "t": "set",
        "p": "match.camera",
        "pt": "msg",
        "to": "payload.camera",
        "tot": "msg",
        "dc": true
      },
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 2940,
    "y": 320,
    "wires": [
      [
        "52ab15905efdccbf"
      ]
    ]
  },
  {
    "id": "52ab15905efdccbf",
    "type": "switch",
    "z": "cd7a606d7931c143",
    "name": "confidence over 80%?",
    "property": "match.confidence",
    "propertyType": "msg",
    "rules": [
      {
        "t": "gt",
        "v": "80",
        "vt": "num"
      },
      {
        "t": "lt",
        "v": "80",
        "vt": "num"
      }
    ],
    "checkall": "true",
    "repair": false,
    "outputs": 2,
    "x": 3140,
    "y": 320,
    "wires": [
      [
        "94e15e45a5dd4895"
      ],
      [
        "13611f4c75079d74"
      ]
    ]
  },
  {
    "id": "93d6cda3f0e6e049",
    "type": "comment",
    "z": "cd7a606d7931c143",
    "name": "Yes",
    "info": "",
    "x": 3330,
    "y": 300,
    "wires": []
  },
  {
    "id": "bb918eb43d688bdd",
    "type": "comment",
    "z": "cd7a606d7931c143",
    "name": "No",
    "info": "",
    "x": 3330,
    "y": 340,
    "wires": []
  },
  {
    "id": "1a15e85a29c4f2bf",
    "type": "change",
    "z": "cd7a606d7931c143",
    "name": "Set Data for mass alert",
    "rules": [
      {
        "t": "move",
        "p": "payload.data.title",
        "pt": "msg",
        "to": "message",
        "tot": "msg"
      },
      {
        "t": "set",
        "p": "color_value",
        "pt": "msg",
        "to": "[0,0,255]",
        "tot": "json"
      },
      {
        "t": "set",
        "p": "dbrigthness",
        "pt": "msg",
        "to": "100",
        "tot": "num"
      },
      {
        "t": "set",
        "p": "video",
        "pt": "msg",
        "to": "on",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 4180,
    "y": 360,
    "wires": [
      [
        "869011ab1d65be1d"
      ]
    ]
  },
  {
    "id": "869011ab1d65be1d",
    "type": "subflow:233ac7dcd801a802",
    "z": "cd7a606d7931c143",
    "name": "",
    "x": 4410,
    "y": 360,
    "wires": []
  }
]